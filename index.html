<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Qu·∫£n l√Ω ng∆∞·ªùi d√πng & L·ªãch s·ª≠ ƒëo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f2f5;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 20px;
      margin: 0;
    }
    .container {
      width: 500px;
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      margin-bottom: 16px;
    }
    select, button {
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      margin-top: 8px;
      font-size: 14px;
    }
    button {
      cursor: pointer;
      background: #007bff;
      color: white;
      border: none;
      transition: background 0.3s;
    }
    button:hover { background: #0056b3; }
    .section {
      margin-top: 20px;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #fafafa;
    }
    /* B·∫£ng l·ªãch s·ª≠ */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      font-size: 14px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 6px;
      text-align: center;
    }
    th {
      background: #f4f6f9;
    }
    /* Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: white;
      padding: 20px;
      border-radius: 12px;
      width: 360px;
    }
    .modal-content input, .modal-content select, .modal-content textarea {
      width: 100%;
      margin-top: 8px;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    .modal-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 12px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Qu·∫£n l√Ω Ng∆∞·ªùi d√πng</h2>
    <select id="userSelect" onchange="showUserInfo()">
      <option value="">-- Ch·ªçn ng∆∞·ªùi d√πng --</option>
    </select>
    <button onclick="openCreateUserModal()">+ T·∫°o ng∆∞·ªùi d√πng m·ªõi</button>
    <button onclick="deleteUser()">üóë X√≥a ng∆∞·ªùi d√πng</button>

    <div id="userInfo" class="section" style="display:none;"></div>
    <div id="history" class="section" style="display:none;"></div>
  </div>

  <!-- Modal t·∫°o user -->
  <div id="createUserModal" class="modal">
    <div class="modal-content">
      <h3>T·∫°o Ng∆∞·ªùi d√πng</h3>
      <input type="text" id="name" placeholder="H·ªç v√† t√™n">
      <input type="number" id="age" placeholder="Tu·ªïi">
      <input type="number" id="weight" placeholder="C√¢n n·∫∑ng (kg)">
      <input type="number" id="height" placeholder="Chi·ªÅu cao (cm)">
      <textarea id="historyDisease" placeholder="L·ªãch s·ª≠ b·ªánh l√≠"></textarea>
      <select id="gender">
        <option value="">-- Gi·ªõi t√≠nh --</option>
        <option value="Nam">Nam</option>
        <option value="N·ªØ">N·ªØ</option>
      </select>
      <input type="text" id="vision" placeholder="ƒê·ªô c·∫≠n (n·∫øu c√≥)">
      <div class="modal-buttons">
        <button onclick="createUser()">T·∫°o</button>
        <button onclick="closeCreateUserModal()">H·ªßy</button>
      </div>
    </div>
  </div>

  <script>
    let users = [];

    function generateFakeHistory() {
      const samples = [];
      const count = Math.floor(Math.random() * 5) + 3; // 3-7 l·∫ßn
      for (let i = 0; i < count; i++) {
        samples.push({
          date: new Date(Date.now() - i*86400000).toLocaleDateString(),
          temp: (36 + Math.random()*2).toFixed(1) + "¬∞C",
          heart: Math.floor(60 + Math.random()*40) + " bpm",
          spo2: Math.floor(94 + Math.random()*6) + "%",
          bp: (100+Math.floor(Math.random()*20)) + "/" + (70+Math.floor(Math.random()*10)) + " mmHg",
          analysis: "Ch·ªâ s·ªë trong ng∆∞·ª°ng an to√†n."
        });
      }
      return samples.reverse();
    }

    function openCreateUserModal() {
      document.getElementById("createUserModal").style.display = "flex";
    }
    function closeCreateUserModal() {
      document.getElementById("createUserModal").style.display = "none";
    }

    function createUser() {
      const user = {
        id: Date.now().toString(),
        name: document.getElementById("name").value,
        age: document.getElementById("age").value,
        weight: document.getElementById("weight").value,
        height: document.getElementById("height").value,
        historyDisease: document.getElementById("historyDisease").value,
        gender: document.getElementById("gender").value,
        vision: document.getElementById("vision").value,
        history: generateFakeHistory()
      };

      users.push(user);
      const select = document.getElementById("userSelect");
      const option = document.createElement("option");
      option.value = user.id;
      option.textContent = user.name;
      select.appendChild(option);

      // reset form
      document.getElementById("name").value = "";
      document.getElementById("age").value = "";
      document.getElementById("weight").value = "";
      document.getElementById("height").value = "";
      document.getElementById("historyDisease").value = "";
      document.getElementById("gender").value = "";
      document.getElementById("vision").value = "";

      closeCreateUserModal();
    }

    function deleteUser() {
      const select = document.getElementById("userSelect");
      const userId = select.value;
      if (!userId) return alert("Ch∆∞a ch·ªçn ng∆∞·ªùi d√πng!");

      users = users.filter(u => u.id !== userId);
      select.querySelector(`option[value='${userId}']`).remove();

      document.getElementById("userInfo").style.display = "none";
      document.getElementById("history").style.display = "none";
    }

    function showUserInfo() {
      const userId = document.getElementById("userSelect").value;
      const user = users.find(u => u.id === userId);
      if (!user) return;

      const userInfo = `
        <b>üë§ ${user.name}</b><br>
        Tu·ªïi: ${user.age}, Gi·ªõi t√≠nh: ${user.gender}<br>
        C√¢n n·∫∑ng: ${user.weight} kg, Cao: ${user.height} cm<br>
        L·ªãch s·ª≠ b·ªánh: ${user.historyDisease || "Kh√¥ng c√≥"}<br>
        ƒê·ªô c·∫≠n: ${user.vision || "Kh√¥ng c√≥"}
      `;
      document.getElementById("userInfo").innerHTML = userInfo;
      document.getElementById("userInfo").style.display = "block";

      let historyHtml = "<b>üìú L·ªãch s·ª≠ ƒëo:</b>";
      historyHtml += `
        <table>
          <tr>
            <th>üìÖ Ng√†y</th>
            <th>üå° Nhi·ªát ƒë·ªô</th>
            <th>‚ù§Ô∏è Nh·ªãp tim</th>
            <th>ü´Å SpO‚ÇÇ</th>
            <th>‚¨ÜÔ∏è Huy·∫øt √°p</th>
            <th>üîç Ph√¢n t√≠ch</th>
          </tr>
      `;
      user.history.forEach(h => {
        historyHtml += `
          <tr>
            <td>${h.date}</td>
            <td>${h.temp}</td>
            <td>${h.heart}</td>
            <td>${h.spo2}</td>
            <td>${h.bp}</td>
            <td>${h.analysis}</td>
          </tr>
        `;
      });
      historyHtml += "</table>";

      document.getElementById("history").innerHTML = historyHtml;
      document.getElementById("history").style.display = "block";
    }
  </script>
</body>
</html>
    
